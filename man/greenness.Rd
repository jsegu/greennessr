% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utiles.R
\encoding{UTF-8}
\name{greenness}
\alias{greenness}
\title{Extracción índice greenness}
\usage{
greenness(x, urban, ndvi)
}
\arguments{
\item{x}{DataFrame con las columnas de entrada.}

\item{urban}{Vector: Con la columna que contiene el parámetro 'urban'.}

\item{ndvi}{Vector: Con la columna que contiene el parámetro 'ndvi'.}
}
\value{
Devuelve el mismo DataFrame de entrada con dos columnas añadidas:
\itemize{
\item greenness: Columna con el valor absoluto del índice greenness.
\item green_cat: Columna con el valor categorizado por cuartiles.
}
}
\description{
A partir de las variables calculadas con las funciones de extracción de la superficie
verde urbana \link[greennessr]{area_urban} y \link[greennessr]{acceso_urban} y de las funciones
de extracción del NDVI \link[greennessr]{ndvi} y \link[greennessr]{acceso_ndvi}. Se construye
un índice combinado llamado “greenness” calculado con una media ponderada entre el área verde
urbana y el NDVI dando mayor peso al área verde urbana “urban atlas”.
}
\details{
Función para crear un índice ponderado que resuma la exposición a espacios verdes
urbanos. Para ello es necesario introducir las variables de 'urban atlas' y NDVI como datos de
entrada, teniendo en cuenta el nivel de desagregación con el que han sido calculados: acceso (
donde se tiene en cuenta la ponderación de la capa de catastro) o area (sin esa ponderación).

El cálculo consiste en una índice ponderado que da mayor peso a la capa 'urban atlas',
concretamente un 80% del peso, mientras que el ndvi tiene un 20% de peso. Para ello, en primer
lugar se entanderiza el NDVI para que su rango vaya de 0-100. Luego se realiza una media
ponderada con los valores comentados anteriormente.
}
\examples{
\dontrun{
library(greennessr)

# carga de datos de ejemplo
data("catastro_castellon")
data("secciones_castellon")
data("urban_atlas_castellon")

# comprobar que son obejetos espaciales
class(catastro_castellon)
class(secciones_castellon)
class(urban_atlas_castellon)

head(secciones_castellon) # 'secccion'

# calculo de la variable 'urban atlas'
castellon <- acceso_urban(
  sc         = secciones_castellon,
  id_sc      = 'seccion',
  urban      = urban_atlas_castellon,
  catastro   = catastro_castellon,
  radio      = 300,
  categorias = c(14100, 14200)
)

# calculo de la variable NDVI
castellon <- acceso_ndvi(
  dir_img    = '~01_data/landsat/castellon',
  sc         = secciones_castellon,
  id_sc      = "seccion",
  catastro   = catastro_castellon,
  radio      = 300,
  calculo    = mean,
  dev_raster = TRUE,
  landsat8   = FALSE
)

# calculo del Ã­ndice ponderado greenness
castellon <- greenness(
   x     = castellon,
   urban = castellon$accs_urban,
   ndvi  = castellon$accs_ndvi
)

# estadÃ­sticas del resultado
summary(castellon$greenness)
}

}
